## 项目2：**基于Linux C的命令行音乐播放器**

**1.可以播放mp3格式的音乐；**

**2.可以通过歌曲文件夹批量导入音乐(在终端输入完整音乐文件夹，导入后可查看当前音乐列表)；**

**3.终端中获取键盘输入，进行暂停、播放、快进、快退、音量加、音量减的操作(不是以回车结束的操作)；**

**4.设计安全退出程序；**

**5.设计安全的多进程多线程**

------

- **首先，**设计音乐数据库（**music.db）**并进行测试（存储音频文件的路径，检索快）

- **其次，**编写简单的播放器控制程序

  ###### （1）控制mplayer播放一个mp3文件

  ###### （2）实现暂停、快进

- **最后**，实现具体的播放逻辑

  ------

  该项目基础：

1. 匿名管道， 有名管道

2. 消息队列

3. 共享内存

4. 信号量

5. 多线程

6. 简单数据库设计                                                                                                                                2018.06.29

   ------

   #### 音频数据库的设计	2018.06.30

   音频数据库实际上是一个音频文件的索引信息库，音频数据库中的每一条记录都唯一对应一个MP3音频文件，主要功能有：

   （1）对音频数据中的记录添加，删除，修改，查找

   （2）可播放音频数据库中记录所对应的MP3音频文件

   （3）实现对音频文件预选单的自动准点播放

   | 编号 | 文件名 | 歌手   | 绝对路径               | 文件大小 | 时长  |
   | ---- | ------ | ------ | ---------------------- | -------- | ----- |
   | 1    | 可能否 | 木小雅 | /home/yang/music/songs | 3.5M     | 03:47 |

------

- #### mplayer命令	2018.07.01

  slave模式：就是mplayer在运行过程中能够接收用户的输入命令，通过命令`mplayer -input cmdlist`查看支持哪些命令

  我可以用到的几个指令如下：

  （1）`pause` 暂停

  （2）`quit` 退出

  （3）`loop`  循环

  （5）`get_time_pos` 获取当前位置

  （6）`get_time_length` 获取时长--

  （7）`get_file_name` 获取文件名

    (8)  `seek <value> [type]`     快进快退se

  Seek to some place in the movie. 

  0 is a relative seek of +/- <value> seconds (default). 

  1 is a seek to <value> % in the movie. 

  2 is a seek to an absolute position of <value> seconds. 

  下面代码即可实现快进功能： process->write(“seek ** 1/n”);